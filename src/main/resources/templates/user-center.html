<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ä¸ªäººä¸­å¿ƒ - äºŒæ‰‹äº¤æ˜“å¹³å°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        .profile-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 0;
            margin-bottom: 30px;
        }
        .avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 5px solid white;
            object-fit: cover;
        }
        .menu-card {
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }
        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .menu-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        /* Navigation hover effects */
        .navbar-nav .nav-item .nav-link {
            position: relative;
            padding: 8px 16px;
            margin: 0 4px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        .navbar-nav .nav-item .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        .navbar-nav .nav-item .nav-link.active {
            background-color: rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body class="bg-light">
    <!-- Navigation Bar -->
    <nav class="navbar navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">äºŒæ‰‹äº¤æ˜“å¹³å°</a>
            <ul class="navbar-nav ms-auto d-flex flex-row gap-2">
                <li class="nav-item">
                    <a class="nav-link" href="/">é¦–é¡µ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/item-edit.html">å‘å¸ƒå•†å“</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="/user-center.html">ä¸ªäººä¸­å¿ƒ</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Profile Header -->
    <div class="profile-header text-center">
        <img th:src="${user?.avatarUrl ?: 'https://via.placeholder.com/120?text=User'}" 
             class="avatar mb-3" 
             th:alt="${user?.username}" />
        <h2 th:text="${user?.username ?: 'è®¿å®¢'}">ç”¨æˆ·å</h2>
        <p class="mb-0" th:text="${user?.email ?: 'æœªç™»å½•'}">user@example.com</p>
        <div class="mt-3" th:if="${user != null}">
            <span class="badge bg-light text-dark" th:text="${user.studentId ?: 'æœªè®¾ç½®å­¦å·'}">æœªè®¾ç½®å­¦å·</span>
            <span class="badge bg-light text-dark ms-2" th:text="${user.college ?: 'æœªè®¾ç½®å­¦é™¢'}">æœªè®¾ç½®å­¦é™¢</span>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container mb-5">
        <!-- User Info Card -->
        <div class="card mb-4" th:if="${user != null}">
            <div class="card-header">
                <h5 class="mb-0">ä¸ªäººä¿¡æ¯</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <strong>ç”¨æˆ·å:</strong>
                        <span th:text="${user.username}">-</span>
                    </div>
                    <div class="col-md-6 mb-3">
                        <strong>å­¦å·:</strong>
                        <span th:text="${user.studentId ?: 'æœªè®¾ç½®'}">-</span>
                    </div>
                    <div class="col-md-6 mb-3">
                        <strong>é‚®ç®±:</strong>
                        <span th:text="${user.email}">-</span>
                    </div>
                    <div class="col-md-6 mb-3">
                        <strong>æ‰‹æœºå·:</strong>
                        <span th:text="${user.phone ?: 'æœªè®¾ç½®'}">-</span>
                    </div>
                    <div class="col-md-6 mb-3">
                        <strong>å­¦é™¢:</strong>
                        <span th:text="${user.college ?: 'æœªè®¾ç½®'}">-</span>
                    </div>
                    <div class="col-md-6 mb-3">
                        <strong>ä¸“ä¸š:</strong>
                        <span th:text="${user.major ?: 'æœªè®¾ç½®'}">-</span>
                    </div>
                    <div class="col-md-6 mb-3">
                        <strong>å¹´çº§:</strong>
                        <span th:text="${user.grade ?: 'æœªè®¾ç½®'}">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Menu -->
        <h4 class="mb-3">å¿«æ·èœå•</h4>
        <div class="row g-4">
            <div class="col-md-4 col-sm-6">
                <a href="/item-edit.html" class="text-decoration-none">
                    <div class="card menu-card text-center h-100">
                        <div class="card-body">
                            <div class="menu-icon text-primary">ğŸ“</div>
                            <h5 class="card-title">å‘å¸ƒå•†å“</h5>
                            <p class="card-text text-muted">å‘å¸ƒæ‚¨çš„é—²ç½®ç‰©å“</p>
                        </div>
                    </div>
                </a>
            </div>

            <div class="col-md-4 col-sm-6">
                <a href="/" class="text-decoration-none">
                    <div class="card menu-card text-center h-100">
                        <div class="card-body">
                            <div class="menu-icon text-info">ğŸ </div>
                            <h5 class="card-title">æµè§ˆå•†å“</h5>
                            <p class="card-text text-muted">æŸ¥çœ‹æ‰€æœ‰åœ¨å”®å•†å“</p>
                        </div>
                    </div>
                </a>
            </div>

            <div class="col-md-4 col-sm-6" th:if="${user != null}">
                <a href="/my-orders.html" class="text-decoration-none">
                    <div class="card menu-card text-center h-100">
                        <div class="card-body">
                            <div class="menu-icon text-success">ğŸ“‹</div>
                            <h5 class="card-title">æˆ‘çš„è®¢å•</h5>
                            <p class="card-text text-muted">ç®¡ç†æˆ‘çš„è®¢å•ä¿¡æ¯</p>
                        </div>
                    </div>
                </a>
            </div>

            <div class="col-md-4 col-sm-6" th:if="${user == null}">
                <a href="/login.html" class="text-decoration-none">
                    <div class="card menu-card text-center h-100">
                        <div class="card-body">
                            <div class="menu-icon text-warning">ğŸ”‘</div>
                            <h5 class="card-title">ç™»å½•</h5>
                            <p class="card-text text-muted">ç™»å½•æ‚¨çš„è´¦æˆ·</p>
                        </div>
                    </div>
                </a>
            </div>

            <div class="col-md-4 col-sm-6" th:if="${user == null}">
                <a href="/register.html" class="text-decoration-none">
                    <div class="card menu-card text-center h-100">
                        <div class="card-body">
                            <div class="menu-icon text-danger">ğŸ“‹</div>
                            <h5 class="card-title">æ³¨å†Œ</h5>
                            <p class="card-text text-muted">åˆ›å»ºæ–°è´¦æˆ·</p>
                        </div>
                    </div>
                </a>
            </div>

            <div class="col-md-4 col-sm-6" th:if="${user != null and user.role == 1}">
                <a href="/admin.html" class="text-decoration-none">
                    <div class="card menu-card text-center h-100">
                        <div class="card-body">
                            <div class="menu-icon text-warning">ğŸ›¡ï¸</div>
                            <h5 class="card-title">ç®¡ç†åå°</h5>
                            <p class="card-text text-muted">ç®¡ç†ç”¨æˆ·å’Œå®¡æ ¸å•†å“</p>
                        </div>
                    </div>
                </a>
            </div>

            <div class="col-md-4 col-sm-6" th:if="${user != null}">
                <div class="card menu-card text-center h-100" onclick="logout()">
                    <div class="card-body">
                        <div class="menu-icon text-secondary">ğŸšª</div>
                        <h5 class="card-title">é€€å‡ºç™»å½•</h5>
                        <p class="card-text text-muted">å®‰å…¨é€€å‡ºè´¦æˆ·</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>

        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                $.ajax({
                    url: '/api/users/logout',
                    type: 'POST',
                    success: function(res) {
                        alert('é€€å‡ºç™»å½•æˆåŠŸ');
                        window.location.href = '/login.html';
                    }
                });
            }
        }
    </script>

</body>
</html>
